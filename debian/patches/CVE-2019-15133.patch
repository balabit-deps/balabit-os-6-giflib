From 799eb6a3af8a3dd81e2429bf11a72a57e541f908 Mon Sep 17 00:00:00 2001
From: "Eric S. Raymond" <esr@thyrsus.com>
Date: Sun, 17 Mar 2019 12:37:21 -0400
Subject: [PATCH] Address SF bug #119: MemorySanitizer: FPE on unknown address
diff --git a/lib/dgif_lib.c b/lib/dgif_lib.c
index e8a78aa..62b16ca 100644
--- a/lib/dgif_lib.c
+++ b/lib/dgif_lib.c
@@ -1099,7 +1099,7 @@ DGifSlurp(GifFileType *GifFile)
 
               sp = &GifFile->SavedImages[GifFile->ImageCount - 1];
               /* Allocate memory for the image */
-              if (sp->ImageDesc.Width < 0 && sp->ImageDesc.Height < 0 &&
+              if (sp->ImageDesc.Width <= 0 || sp->ImageDesc.Height <= 0 ||
                       sp->ImageDesc.Width > (INT_MAX / sp->ImageDesc.Height)) {
                   return GIF_ERROR;
               }
